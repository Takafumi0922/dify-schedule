name: Auto Run Dify

on:
  schedule:
    # 日本時間の朝9時に実行 (UTC 0:00)
    - cron: "9 0 * * 3"
  workflow_dispatch: # 手動実行ボタン用

jobs:
  trigger_dify:
    runs-on: ubuntu-latest
    steps:
      - name: Call Dify API
        run: |
          # DifyのAPIを叩く処理 (curlを使用)
          curl -X POST "${{ secrets.DIFY_BASE_URL }}/workflows/run" \
          --header "Authorization: Bearer ${{ secrets.DIFY_API_KEY }}" \
          --header "Content-Type: application/json" \
          --data-raw '{
              "inputs": {},
              "response_mode": "blocking",
              "user": "github-action-bot"
          }'
